<!doctype html>



































<html class="not-ready lg:text-base" style="--bg: #faf8f1" lang="en-us"
  dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Dungeons and Portals | Mount Sinai Hospital - Ember Zhang [Code]</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="Description The Dungeons &amp; Portals Game is a platformer game developed in vanilla JavaScript within a Flask application.
Link: https://dungeons-and-portals.onrender.com
Code: https://github.com/emberlzhang/task_dungeon-portals-game
Purpose The Dungeons &amp; Portals Game was designed for the Center for Computational Psychiatry at Mount Sinai Hospital to differentiate between clinical populations with behavioral compulsions and healthy control (HC) populations.
Overview Each round of the game, the player chooses a dungeon to enter, then tries to escape the dungeon using the fewest number of portal teleportations possible." />
  <meta name="author" content="Ember Zhang" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://emberlzhang.github.io/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="https://emberlzhang.github.io/theme.png" />

  
  
  
  
  

  
  
  <link rel="preload" as="image" href="https://emberlzhang.github.io/github.svg" />
  
  <link rel="preload" as="image" href="https://emberlzhang.github.io/linkedin.svg" />
  
  

  
  
  <script
    defer
    src="https://emberlzhang.github.io/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  

  
  <link
    rel="icon"
    href="https://emberlzhang.github.io/favicon.ico"
  />
  <link
    rel="apple-touch-icon"
    href="https://emberlzhang.github.io/apple-touch-icon.png"
  />

  
  <meta name="generator" content="Hugo 0.127.0">

  
  
  
  
  


  
  
  <meta itemprop="name" content="Dungeons and Portals | Mount Sinai Hospital">
  <meta itemprop="description" content="Dungeons and portals game">
  <meta itemprop="datePublished" content="2024-09-30T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-09-30T00:00:00+00:00">
  <meta itemprop="wordCount" content="1129">
  <meta itemprop="keywords" content="JavaScript,Flask,Python">
  
  <meta property="og:url" content="https://emberlzhang.github.io/portfolio/dungeons-portals/">
  <meta property="og:site_name" content="Ember Zhang [Code]">
  <meta property="og:title" content="Dungeons and Portals | Mount Sinai Hospital">
  <meta property="og:description" content="Dungeons and portals game">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="portfolio">
    <meta property="article:published_time" content="2024-09-30T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-09-30T00:00:00+00:00">
    <meta property="article:tag" content="JavaScript">
    <meta property="article:tag" content="Flask">
    <meta property="article:tag" content="Python">

  
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Dungeons and Portals | Mount Sinai Hospital">
  <meta name="twitter:description" content="Dungeons and portals game">

  
  

  
  <link rel="canonical" href="https://emberlzhang.github.io/portfolio/dungeons-portals/" />
  
  
</head>


<body class="text-black duration-200 ease-out dark:text-white">
  <header class="mx-auto flex h-[4.5rem] max-w-[--w] px-8 lg:justify-center">
  <div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center">
    <a class="-translate-y-[1px] text-2xl font-medium" href="https://emberlzhang.github.io/"
      >Ember Zhang [Code]</a
    >
    <div
      class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#faf8f1'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    
    <nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse">
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/about/"
        >About</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/portfolio/"
        >Portfolio</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/contact/"
        >Contact</a
      >
      
    </nav>
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 rtl:space-x-reverse dark:invert ltr:lg:ml-14 rtl:lg:mr-14 lg:mt-0 lg:items-center"
    >
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/emberlzhang"
        target="_blank"
        rel="me"
      >
        github
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./linkedin.svg)"
        href="https://linkedin.com/in/emberzhang"
        target="_blank"
        rel="me"
      >
        linkedin
      </a>
      
    </nav>
    
  </div>
</header>


  <main
    class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-[--w] px-8 pb-16 pt-14 dark:prose-invert">
    

<article>
  <header class="mb-14">
    <h1 class="!my-0 pb-2.5">Dungeons and Portals | Mount Sinai Hospital</h1>


    
    <div class="text-xs antialiased opacity-60">
      
      
      <time>September 2024</time>
      
      
      
      
    </div>
    

    
    
    <div class="flex flex-wrap" style="margin-top: 1rem;">
       
      <a class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
        href="https://emberlzhang.github.io/tags/javascript">JavaScript</a>
       
      <a class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
        href="https://emberlzhang.github.io/tags/flask">Flask</a>
       
      <a class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
        href="https://emberlzhang.github.io/tags/python">Python</a>
      
    </div>

  </header>

  <section><h3 id="description">Description</h3>
<p>The Dungeons &amp; Portals Game is a platformer game developed in vanilla JavaScript within a Flask application.</p>
<p><strong>Link:</strong> <a href="https://dungeons-and-portals.onrender.com">https://dungeons-and-portals.onrender.com</a></p>
<p><strong>Code:</strong> <a href="https://github.com/emberlzhang/task_dungeon-portals-game">https://github.com/emberlzhang/task_dungeon-portals-game</a></p>
<h3 id="purpose">Purpose</h3>
<p>The Dungeons &amp; Portals Game was designed for the <a href="https://github.com/Center-for-Computational-Psychiatry/">Center for Computational Psychiatry</a> at <a href="https://icahn.mssm.edu/research/center-for-computational-psychiatry/team">Mount Sinai Hospital</a> to differentiate between clinical populations with behavioral compulsions and healthy control (HC) populations.</p>
<p><figure><img src="/dungeons_portals_screenshot1.png" width="600">
</figure>

<figure><img src="/dungeons_portals_screenshot2.png" width="600">
</figure>
</p>
<h3 id="overview">Overview</h3>
<p>Each round of the game, the player chooses a dungeon to enter, then tries to escape the dungeon using the fewest number of portal teleportations possible.</p>
<!-- raw HTML omitted -->
<h3 id="gameplay-mechanics">Gameplay Mechanics</h3>
<ol>
<li>
<p>The game begins on the Home Screen, where the player chooses to enter one of two dungeons.</p>
</li>
<li>
<p>Unknown to the player, the two dungeons operate on the following underlying logic:</p>
<ul>
<li>Option A: High reward, high cost - always results in a net negative point balance.</li>
<li>Option B: Moderate reward, no cost - always results in a net positive point balance.</li>
</ul>
</li>
<li>
<p>Upon entering a dungeon, the player earns a certain number of points.</p>
</li>
<li>
<p>Each dungeon contains portals, with the goal of finding a way to the &ldquo;escape&rdquo; door.</p>
<ul>
<li>The player navigates through these portals, which teleport them to different sections of the dungeon, until they reach the escape door.</li>
<li>Depending on whether the dungeon represents Option A or B, the portals may cause the player to lose points.</li>
</ul>
</li>
<li>
<p>Once the player escapes the dungeon, they return to the Home Screen to make another choice.</p>
</li>
</ol>
<h3 id="features">Features</h3>
<h4 id="teleportation-logic">Teleportation Logic</h4>
<p>The player&rsquo;s ability to &ldquo;teleport&rdquo; through portals in the game was enabled using algorithms run at the beginning of the game session.</p>
<ol>
<li>The <strong>portal_generator</strong> algorithm randomly generates portal-to-portal connections in the form of integer key-value pairs.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">portal_generator</span>(self):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>n_doors <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;Number of doors needs to be even.&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># this is because every door needs a connecting door</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    doors <span style="color:#f92672">=</span> list(range(self<span style="color:#f92672">.</span>n_doors)) <span style="color:#75715e"># make array list of size n_doors</span>
</span></span><span style="display:flex;"><span>    doors <span style="color:#f92672">=</span> [i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> doors] <span style="color:#75715e"># add 1 to each array item to account for index zero </span>
</span></span><span style="display:flex;"><span>    portal_connections <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># for connection in range(1, n_connections):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> len(doors) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        random<span style="color:#f92672">.</span>shuffle(doors)
</span></span><span style="display:flex;"><span>        point_a <span style="color:#f92672">=</span> doors[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        doors<span style="color:#f92672">.</span>remove(point_a)
</span></span><span style="display:flex;"><span>        point_b <span style="color:#f92672">=</span> doors[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        doors<span style="color:#f92672">.</span>remove(point_b)
</span></span><span style="display:flex;"><span>        portal_connections[point_a] <span style="color:#f92672">=</span> point_b
</span></span><span style="display:flex;"><span>        portal_connections[point_b] <span style="color:#f92672">=</span> point_a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    floors_n_doors <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>    n_doorsperfloor <span style="color:#f92672">=</span> math<span style="color:#f92672">.</span>ceil(self<span style="color:#f92672">.</span>n_doors <span style="color:#f92672">/</span> self<span style="color:#f92672">.</span>n_floors) <span style="color:#75715e"># round up to nearest integer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># assign doors to each floor</span>
</span></span><span style="display:flex;"><span>    doors_list <span style="color:#f92672">=</span> list(range(<span style="color:#ae81ff">1</span>, self<span style="color:#f92672">.</span>n_doors<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> floor <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, self<span style="color:#f92672">.</span>n_floors<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>): <span style="color:#75715e"># 1 thru 4 floors floorsndoors[4] = range 3*3+1, 10</span>
</span></span><span style="display:flex;"><span>        doors <span style="color:#f92672">=</span> doors_list[:n_doorsperfloor] 
</span></span><span style="display:flex;"><span>        floors_n_doors[floor] <span style="color:#f92672">=</span> doors <span style="color:#75715e"># assign doors to floor</span>
</span></span><span style="display:flex;"><span>        doors_list <span style="color:#f92672">=</span> doors_list[n_doorsperfloor:] <span style="color:#75715e"># remove doors of that floor from doors_list</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assignments <span style="color:#f92672">=</span> [portal_connections, floors_n_doors]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> assignments
</span></span></code></pre></div><ol start="2">
<li>The <strong>portal_solver</strong> algorithm determines the shortest path (number of teleportations) to &ldquo;solve&rdquo; the portal map.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">portal_generator</span>(self):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>n_doors <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;Number of doors needs to be even.&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># this is because every door needs a connecting door</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    doors <span style="color:#f92672">=</span> list(range(self<span style="color:#f92672">.</span>n_doors)) <span style="color:#75715e"># make array list of size n_doors</span>
</span></span><span style="display:flex;"><span>    doors <span style="color:#f92672">=</span> [i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> doors] <span style="color:#75715e"># add 1 to each array item to account for index zero </span>
</span></span><span style="display:flex;"><span>    portal_connections <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># for connection in range(1, n_connections):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> len(doors) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        random<span style="color:#f92672">.</span>shuffle(doors)
</span></span><span style="display:flex;"><span>        point_a <span style="color:#f92672">=</span> doors[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        doors<span style="color:#f92672">.</span>remove(point_a)
</span></span><span style="display:flex;"><span>        point_b <span style="color:#f92672">=</span> doors[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        doors<span style="color:#f92672">.</span>remove(point_b)
</span></span><span style="display:flex;"><span>        portal_connections[point_a] <span style="color:#f92672">=</span> point_b
</span></span><span style="display:flex;"><span>        portal_connections[point_b] <span style="color:#f92672">=</span> point_a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    floors_n_doors <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>    n_doorsperfloor <span style="color:#f92672">=</span> math<span style="color:#f92672">.</span>ceil(self<span style="color:#f92672">.</span>n_doors <span style="color:#f92672">/</span> self<span style="color:#f92672">.</span>n_floors) <span style="color:#75715e"># round up to nearest integer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># assign doors to each floor</span>
</span></span><span style="display:flex;"><span>    doors_list <span style="color:#f92672">=</span> list(range(<span style="color:#ae81ff">1</span>, self<span style="color:#f92672">.</span>n_doors<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> floor <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, self<span style="color:#f92672">.</span>n_floors<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>): <span style="color:#75715e"># 1 thru 4 floors floorsndoors[4] = range 3*3+1, 10</span>
</span></span><span style="display:flex;"><span>        doors <span style="color:#f92672">=</span> doors_list[:n_doorsperfloor] 
</span></span><span style="display:flex;"><span>        floors_n_doors[floor] <span style="color:#f92672">=</span> doors <span style="color:#75715e"># assign doors to floor</span>
</span></span><span style="display:flex;"><span>        doors_list <span style="color:#f92672">=</span> doors_list[n_doorsperfloor:] <span style="color:#75715e"># remove doors of that floor from doors_list</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assignments <span style="color:#f92672">=</span> [portal_connections, floors_n_doors]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> assignments
</span></span></code></pre></div><ol start="3">
<li>The <strong>portal_picker</strong> algorithm keeps running portal_maker and portal_solver until finding a set of portals that met the criteria set by the game in terms of portal map solving difficulty. (For example, in one of our main game setups, we set the difficulty of the game dungeons to take a minimum of 3 steps-to-solve.)</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">portal_picker</span>(self):
</span></span><span style="display:flex;"><span>    steps <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    reps <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> steps <span style="color:#f92672">!=</span> self<span style="color:#f92672">.</span>steps_to_solve:
</span></span><span style="display:flex;"><span>        reps <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        assignments <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>portal_generator() <span style="color:#75715e"># generate new set of portal connections</span>
</span></span><span style="display:flex;"><span>        portal_connections <span style="color:#f92672">=</span> assignments[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        floors_n_doors <span style="color:#f92672">=</span> assignments[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>        steps <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>portal_solver(portal_connections, floors_n_doors) <span style="color:#75715e"># solve for this set of portal connections</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> steps <span style="color:#f92672">==</span> self<span style="color:#f92672">.</span>steps_to_solve: <span style="color:#75715e"># if it matches, return this set of portal connections</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> reps <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">100</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;More than 100 failed attempts to find portal connections. Try different portal parameters.&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print(&#34;Portal set found!&#34;)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print(&#34;Steps to solve: &#34; + str(steps))</span>
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>portal_connections <span style="color:#f92672">=</span> portal_connections
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> portal_connections
</span></span></code></pre></div><p>These algorithms return a dictionary mapping two unique sets of portal-to-portal connections for the creation of two dungeons for each user / game session.</p>
<p>These algorithms also ensure a consistent level of game difficulty across different user sessions.</p>
<h4 id="real-time-animations">Real-Time Animations</h4>
<p>An animation loop (60 ms frame rate) is run to allow real-time animations. The Player object is made to appear as a living and moving character through a set of sprite images set to repeatedly cycle at a certain refresh rate based on the game frame rate.</p>
<h4 id="collision-management">Collision Management</h4>
<p>The use of &ldquo;collision block&rdquo; objects allows for the player to navigate the entire platform game map without colliding into any visible walls or the ground.</p>
<p>The game&rsquo;s Map object would represent information about each dungeon in the game and denote the borders through a set of collision blocks.</p>
<p>At each frame refresh of the game, functions like <strong>checkHorizontalCollisions</strong> (shown here) and <strong>checkVerticalCollisions</strong> would run to ensure the player&rsquo;s position was not colliding with the pre-set collision blocks made by the Map object (as shown above).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">checkHorizontalCollisions</span>(<span style="color:#a6e22e">collisionBlocks</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">collisionBlocks</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">collisionBlock</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">collisionBlocks</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// if player collision exists
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#75715e">// left side of player hits collision block
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayWidth</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#75715e">// right side of player hits collision block
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayHeight</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#75715e">// bottom of player hits collision block
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">height</span> <span style="color:#75715e">// top of player hits collision block
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// player colliding while going to the left
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">velocity</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// reset player position to avoid collision
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">0.01</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// player colliding while going to the right
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">velocity</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// reset player position to avoid collision
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayWidth</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">0.01</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="significance-to-end-user">Significance to End User</h3>
<p>The game tracks the player&rsquo;s ability to accurately model cost-benefit in complex-deterministic environments, and to make rational choices to maximize game rewards.</p>
<p>Deviations from expected behavior may indicate an inability to correctly model cost-benefit of complex decisions. Correlation between irrational behavioral choices and behavioral compulsions may suggest that the inability to correctly model complex environments underlies behavioral compulsions in clinical populations.</p>
<p>Player behavior and preferences are mapped to Bayesian inference models to discern group-level differences between HC populations and clinical behavioral compulsion groups.</p>

</section>
  <footer>
  </footer>
  

  
  
  
  
  <nav
    class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]">
    
    
    <a class="ltr:ml-auto rtl:mr-auto justify-end pl-3" href="https://emberlzhang.github.io/portfolio/rose-garden/"><span>Rose Garden Game | Mount Sinai Hospital</span><span
        class="ltr:ml-1.5 rtl:mr-1.5">→</span></a>
    
  </nav>
  
  

  
  

  
  

  


  
</article>


    <h3 id="description">Description</h3>
<p>The Dungeons &amp; Portals Game is a platformer game developed in vanilla JavaScript within a Flask application.</p>
<p><strong>Link:</strong> <a href="https://dungeons-and-portals.onrender.com">https://dungeons-and-portals.onrender.com</a></p>
<p><strong>Code:</strong> <a href="https://github.com/emberlzhang/task_dungeon-portals-game">https://github.com/emberlzhang/task_dungeon-portals-game</a></p>
<h3 id="purpose">Purpose</h3>
<p>The Dungeons &amp; Portals Game was designed for the <a href="https://github.com/Center-for-Computational-Psychiatry/">Center for Computational Psychiatry</a> at <a href="https://icahn.mssm.edu/research/center-for-computational-psychiatry/team">Mount Sinai Hospital</a> to differentiate between clinical populations with behavioral compulsions and healthy control (HC) populations.</p>
<p><figure><img src="/dungeons_portals_screenshot1.png" width="600">
</figure>

<figure><img src="/dungeons_portals_screenshot2.png" width="600">
</figure>
</p>
<h3 id="overview">Overview</h3>
<p>Each round of the game, the player chooses a dungeon to enter, then tries to escape the dungeon using the fewest number of portal teleportations possible.</p>
<!-- raw HTML omitted -->
<h3 id="gameplay-mechanics">Gameplay Mechanics</h3>
<ol>
<li>
<p>The game begins on the Home Screen, where the player chooses to enter one of two dungeons.</p>
</li>
<li>
<p>Unknown to the player, the two dungeons operate on the following underlying logic:</p>
<ul>
<li>Option A: High reward, high cost - always results in a net negative point balance.</li>
<li>Option B: Moderate reward, no cost - always results in a net positive point balance.</li>
</ul>
</li>
<li>
<p>Upon entering a dungeon, the player earns a certain number of points.</p>
</li>
<li>
<p>Each dungeon contains portals, with the goal of finding a way to the &ldquo;escape&rdquo; door.</p>
<ul>
<li>The player navigates through these portals, which teleport them to different sections of the dungeon, until they reach the escape door.</li>
<li>Depending on whether the dungeon represents Option A or B, the portals may cause the player to lose points.</li>
</ul>
</li>
<li>
<p>Once the player escapes the dungeon, they return to the Home Screen to make another choice.</p>
</li>
</ol>
<h3 id="features">Features</h3>
<h4 id="teleportation-logic">Teleportation Logic</h4>
<p>The player&rsquo;s ability to &ldquo;teleport&rdquo; through portals in the game was enabled using algorithms run at the beginning of the game session.</p>
<ol>
<li>The <strong>portal_generator</strong> algorithm randomly generates portal-to-portal connections in the form of integer key-value pairs.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">portal_generator</span>(self):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>n_doors <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;Number of doors needs to be even.&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># this is because every door needs a connecting door</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    doors <span style="color:#f92672">=</span> list(range(self<span style="color:#f92672">.</span>n_doors)) <span style="color:#75715e"># make array list of size n_doors</span>
</span></span><span style="display:flex;"><span>    doors <span style="color:#f92672">=</span> [i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> doors] <span style="color:#75715e"># add 1 to each array item to account for index zero </span>
</span></span><span style="display:flex;"><span>    portal_connections <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># for connection in range(1, n_connections):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> len(doors) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        random<span style="color:#f92672">.</span>shuffle(doors)
</span></span><span style="display:flex;"><span>        point_a <span style="color:#f92672">=</span> doors[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        doors<span style="color:#f92672">.</span>remove(point_a)
</span></span><span style="display:flex;"><span>        point_b <span style="color:#f92672">=</span> doors[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        doors<span style="color:#f92672">.</span>remove(point_b)
</span></span><span style="display:flex;"><span>        portal_connections[point_a] <span style="color:#f92672">=</span> point_b
</span></span><span style="display:flex;"><span>        portal_connections[point_b] <span style="color:#f92672">=</span> point_a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    floors_n_doors <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>    n_doorsperfloor <span style="color:#f92672">=</span> math<span style="color:#f92672">.</span>ceil(self<span style="color:#f92672">.</span>n_doors <span style="color:#f92672">/</span> self<span style="color:#f92672">.</span>n_floors) <span style="color:#75715e"># round up to nearest integer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># assign doors to each floor</span>
</span></span><span style="display:flex;"><span>    doors_list <span style="color:#f92672">=</span> list(range(<span style="color:#ae81ff">1</span>, self<span style="color:#f92672">.</span>n_doors<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> floor <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, self<span style="color:#f92672">.</span>n_floors<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>): <span style="color:#75715e"># 1 thru 4 floors floorsndoors[4] = range 3*3+1, 10</span>
</span></span><span style="display:flex;"><span>        doors <span style="color:#f92672">=</span> doors_list[:n_doorsperfloor] 
</span></span><span style="display:flex;"><span>        floors_n_doors[floor] <span style="color:#f92672">=</span> doors <span style="color:#75715e"># assign doors to floor</span>
</span></span><span style="display:flex;"><span>        doors_list <span style="color:#f92672">=</span> doors_list[n_doorsperfloor:] <span style="color:#75715e"># remove doors of that floor from doors_list</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assignments <span style="color:#f92672">=</span> [portal_connections, floors_n_doors]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> assignments
</span></span></code></pre></div><ol start="2">
<li>The <strong>portal_solver</strong> algorithm determines the shortest path (number of teleportations) to &ldquo;solve&rdquo; the portal map.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">portal_generator</span>(self):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>n_doors <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;Number of doors needs to be even.&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># this is because every door needs a connecting door</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    doors <span style="color:#f92672">=</span> list(range(self<span style="color:#f92672">.</span>n_doors)) <span style="color:#75715e"># make array list of size n_doors</span>
</span></span><span style="display:flex;"><span>    doors <span style="color:#f92672">=</span> [i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> doors] <span style="color:#75715e"># add 1 to each array item to account for index zero </span>
</span></span><span style="display:flex;"><span>    portal_connections <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># for connection in range(1, n_connections):</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> len(doors) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        random<span style="color:#f92672">.</span>shuffle(doors)
</span></span><span style="display:flex;"><span>        point_a <span style="color:#f92672">=</span> doors[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        doors<span style="color:#f92672">.</span>remove(point_a)
</span></span><span style="display:flex;"><span>        point_b <span style="color:#f92672">=</span> doors[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        doors<span style="color:#f92672">.</span>remove(point_b)
</span></span><span style="display:flex;"><span>        portal_connections[point_a] <span style="color:#f92672">=</span> point_b
</span></span><span style="display:flex;"><span>        portal_connections[point_b] <span style="color:#f92672">=</span> point_a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    floors_n_doors <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>    n_doorsperfloor <span style="color:#f92672">=</span> math<span style="color:#f92672">.</span>ceil(self<span style="color:#f92672">.</span>n_doors <span style="color:#f92672">/</span> self<span style="color:#f92672">.</span>n_floors) <span style="color:#75715e"># round up to nearest integer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># assign doors to each floor</span>
</span></span><span style="display:flex;"><span>    doors_list <span style="color:#f92672">=</span> list(range(<span style="color:#ae81ff">1</span>, self<span style="color:#f92672">.</span>n_doors<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> floor <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, self<span style="color:#f92672">.</span>n_floors<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>): <span style="color:#75715e"># 1 thru 4 floors floorsndoors[4] = range 3*3+1, 10</span>
</span></span><span style="display:flex;"><span>        doors <span style="color:#f92672">=</span> doors_list[:n_doorsperfloor] 
</span></span><span style="display:flex;"><span>        floors_n_doors[floor] <span style="color:#f92672">=</span> doors <span style="color:#75715e"># assign doors to floor</span>
</span></span><span style="display:flex;"><span>        doors_list <span style="color:#f92672">=</span> doors_list[n_doorsperfloor:] <span style="color:#75715e"># remove doors of that floor from doors_list</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assignments <span style="color:#f92672">=</span> [portal_connections, floors_n_doors]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> assignments
</span></span></code></pre></div><ol start="3">
<li>The <strong>portal_picker</strong> algorithm keeps running portal_maker and portal_solver until finding a set of portals that met the criteria set by the game in terms of portal map solving difficulty. (For example, in one of our main game setups, we set the difficulty of the game dungeons to take a minimum of 3 steps-to-solve.)</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">portal_picker</span>(self):
</span></span><span style="display:flex;"><span>    steps <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    reps <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> steps <span style="color:#f92672">!=</span> self<span style="color:#f92672">.</span>steps_to_solve:
</span></span><span style="display:flex;"><span>        reps <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        assignments <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>portal_generator() <span style="color:#75715e"># generate new set of portal connections</span>
</span></span><span style="display:flex;"><span>        portal_connections <span style="color:#f92672">=</span> assignments[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        floors_n_doors <span style="color:#f92672">=</span> assignments[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>        steps <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>portal_solver(portal_connections, floors_n_doors) <span style="color:#75715e"># solve for this set of portal connections</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> steps <span style="color:#f92672">==</span> self<span style="color:#f92672">.</span>steps_to_solve: <span style="color:#75715e"># if it matches, return this set of portal connections</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> reps <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">100</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;More than 100 failed attempts to find portal connections. Try different portal parameters.&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print(&#34;Portal set found!&#34;)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># print(&#34;Steps to solve: &#34; + str(steps))</span>
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>portal_connections <span style="color:#f92672">=</span> portal_connections
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> portal_connections
</span></span></code></pre></div><p>These algorithms return a dictionary mapping two unique sets of portal-to-portal connections for the creation of two dungeons for each user / game session.</p>
<p>These algorithms also ensure a consistent level of game difficulty across different user sessions.</p>
<h4 id="real-time-animations">Real-Time Animations</h4>
<p>An animation loop (60 ms frame rate) is run to allow real-time animations. The Player object is made to appear as a living and moving character through a set of sprite images set to repeatedly cycle at a certain refresh rate based on the game frame rate.</p>
<h4 id="collision-management">Collision Management</h4>
<p>The use of &ldquo;collision block&rdquo; objects allows for the player to navigate the entire platform game map without colliding into any visible walls or the ground.</p>
<p>The game&rsquo;s Map object would represent information about each dungeon in the game and denote the borders through a set of collision blocks.</p>
<p>At each frame refresh of the game, functions like <strong>checkHorizontalCollisions</strong> (shown here) and <strong>checkVerticalCollisions</strong> would run to ensure the player&rsquo;s position was not colliding with the pre-set collision blocks made by the Map object (as shown above).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">checkHorizontalCollisions</span>(<span style="color:#a6e22e">collisionBlocks</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">collisionBlocks</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">collisionBlock</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">collisionBlocks</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// if player collision exists
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#75715e">// left side of player hits collision block
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayWidth</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#75715e">// right side of player hits collision block
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayHeight</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#75715e">// bottom of player hits collision block
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">height</span> <span style="color:#75715e">// top of player hits collision block
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// player colliding while going to the left
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">velocity</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// reset player position to avoid collision
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">0.01</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// player colliding while going to the right
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">velocity</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// reset player position to avoid collision
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">collisionBlock</span>.<span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayWidth</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">0.01</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="significance-to-end-user">Significance to End User</h3>
<p>The game tracks the player&rsquo;s ability to accurately model cost-benefit in complex-deterministic environments, and to make rational choices to maximize game rewards.</p>
<p>Deviations from expected behavior may indicate an inability to correctly model cost-benefit of complex decisions. Correlation between irrational behavioral choices and behavioral compulsions may suggest that the inability to correctly model complex environments underlies behavioral compulsions in clinical populations.</p>
<p>Player behavior and preferences are mapped to Bayesian inference models to discern group-level differences between HC populations and clinical behavioral compulsion groups.</p>


  </main>


  <footer
  class="mx-auto flex h-[4.5rem] max-w-[--w] items-center px-8 text-xs uppercase tracking-wider opacity-60"
>
  <div class="mr-auto">
  
    © 2024 Ember Zhang
  
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >powered by hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >hugo-paper</a
  >
</footer>

</body>

</html>